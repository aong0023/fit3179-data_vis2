{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 650,
  "height": 420,
  "background": "#fff8dc",
  "data": {
    "url": "https://raw.githubusercontent.com/aong0023/fit3179-data_vis2/refs/heads/main/Australia_slopes_by_beach.csv"
  },
  "transform": [
    { "calculate": "toNumber(datum.beach_slope_average)", "as": "beach_slope_average_num" },
    { "calculate": "toNumber(datum.hsig_median)", "as": "hsig_median_num" },
    {
      "calculate": "datum.beach_slope_average_num <= 0.03 ? 'Gentle' : datum.beach_slope_average_num <= 0.06 ? 'Moderate' : 'Steep'",
      "as": "SlopeCategory"
    },
    { "filter": "datum.hsig_median_num >= waveMin && datum.hsig_median_num <= waveMax" },
    { "filter": "regionSelection == 'All' || datum.coastal_region == regionSelection" }
  ],
  "params": [
    {
      "name": "waveMin",
      "value": 0,
      "bind": {
        "input": "range",
        "min": 0,
        "max": 5,
        "step": 0.1,
        "name": "Minimum Median Wave Height (m): "
      }
    },
    {
      "name": "waveMax",
      "value": 5,
      "bind": {
        "input": "range",
        "min": 0,
        "max": 5,
        "step": 0.1,
        "name": "Maximum Median Wave Height (m): "
      }
    },
    {
      "name": "regionSelection",
      "value": "All",
      "bind": {
        "input": "select",
        "options": [
          "All",
          "Central West WA",
          "Kimberley",
          "Southwest WA",
          "Pilbara",
          "Southern WA",
          "Eastern Cape York Peninsula",
          "Southern Gulf of Carpentaria",
          "Central Queensland",
          "Western Cape York Peninsula",
          "East Arnhem Land",
          "Western NT",
          "South Australian Gulfs",
          "Western Eyre Peninsula",
          "Southern SA",
          "Nullarbor",
          "East Tasmania",
          "North Tasmania",
          "West Tasmania",
          "Southern NSW",
          "Central East",
          "Gippsland",
          "Central and Western VIC"
        ],
        "name": "Select Coastal Region: "
      }
    }
  ],
  "layer": [
    {
      "mark": { "type": "point", "filled": true, "opacity": 0.7, "size": 70 },
      "encoding": {
        "x": {
          "field": "beach_slope_average_num",
          "type": "quantitative",
          "title": "Average Beach Slope (°)",
          "scale": { "domain": [0, 0.20] },
          "axis": { "format": ".3f", "tickCount": 5 }
        },
        "y": {
          "field": "hsig_median_num",
          "type": "quantitative",
          "title": "Median Significant Wave Height (m)",
          "axis": { "format": ".3f" }
        },
        "color": {
          "field": "SlopeCategory",
          "type": "nominal",
          "title": "Slope Type",
          "scale": {
            "domain": ["Gentle", "Moderate", "Steep"],
            "range": ["#1dadc0", "#F4C300", "#D55E00"]
          },
          "legend": {
            "titleFontSize": 16,
            "labelFontSize": 14,
            "symbolSize": 250,
            "symbolType": "circle",
            "titleFontWeight": "bold",
            "orient": "right",
            "padding": 10
          }
        },
        "tooltip": [
          { "field": "SlopeCategory", "title": "Slope Type" },
          { "field": "beach_slope_average_num", "title": "Slope (°)", "format": ".3f" },
          { "field": "hsig_median_num", "title": "Wave Height (m)", "format": ".3f" },
          { "field": "coastal_region", "title": "Region" }
        ]
      }
    },
    {
      "transform": [
        { "regression": "hsig_median_num", "on": "beach_slope_average_num" }
      ],
      "mark": { "type": "line", "stroke": "black", "strokeWidth": 1.5 },
      "encoding": {
        "x": { "field": "beach_slope_average_num", "type": "quantitative" },
        "y": { "field": "hsig_median_num", "type": "quantitative" }
      }
    }
  ],
  "config": {
    "axis": { "labelFontSize": 12, "titleFontSize": 13 },
    "background": "#fff8dc"
  }
}
